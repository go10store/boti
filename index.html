<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بوطي - توصيل مياه الزنتان</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#020617">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
    <header class="site-header">
        <div class="container nav-content">
            <div class="logo">
                <span style="color:var(--text-main)">تطبيق</span> بوطي
            </div>
            <a href="register.html" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="margin-left:8px">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="8.5" cy="7" r="4"></circle>
                    <line x1="20" y1="8" x2="20" y2="14"></line>
                    <line x1="23" y1="11" x2="17" y2="11"></line>
                </svg>
                سجل شاحنتك
            </a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1 class="slide-up">خدمة توصيل المياه في الزنتان</h1>
            <p class="slide-up"
                style="animation-delay: 0.1s; color: var(--text-sub); margin-bottom: 2rem; font-size: 1.1rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                ابحث عن أقرب شاحنة مياه (بوطي) من الخشة أو وادي زويا بكل سهولة
            </p>

            <div class="slide-up"
                style="animation-delay: 0.2s; display: flex; gap: 0.8rem; justify-content: center; flex-wrap: wrap; margin-top:2rem;">
                <button onclick="filterDrivers('KHASHA')" class="btn filter-btn">الخشة</button>
                <button onclick="filterDrivers('WADI_ZOYA')" class="btn filter-btn">وادي زويا</button>
                <button onclick="filterDrivers('ALL')" class="btn filter-btn active">الكل</button>
            </div>
        </div>
    </section>

    <main class="container">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <h2 style="font-size: 1.5rem;">السائقين المتاحين</h2>
            <div
                style="width: 10px; height: 10px; background: var(--success); border-radius: 50%; box-shadow: 0 0 10px var(--success);">
            </div>
        </div>

        <div id="driver-grid" class="grid">
            <!-- Skeleton Loading State -->
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.1s"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.2s"></div>
        </div>
    </main>

    <footer>
        <p>© 2025 تطبيق بوطي</p>
        <p class="alkow">تم التطوير بواسطة Alkow Software</p>
    </footer>

    <script src="app.js"></script>
    <script>
        // Page Logic
        let allDrivers = [];

        async function init() {
            allDrivers = await getDrivers();
            renderDrivers(allDrivers, 'driver-grid');
        }

        function filterDrivers(source) {
            // Visual feedback for buttons
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (source === 'ALL') {
                renderDrivers(allDrivers, 'driver-grid');
            } else {
                const filtered = allDrivers.filter(d => d.source === source);
                renderDrivers(filtered, 'driver-grid');
            }
        }

        init();
    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ·ÙŠ - ØªÙˆØµÙŠÙ„ Ù…ÙŠØ§Ù‡ Ø§Ù„Ø²Ù†ØªØ§Ù†</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#020617">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
    <header class="site-header">
        <div class="container nav-content">
            <div class="logo">
                <span style="color:var(--text-main)">ØªØ·Ø¨ÙŠÙ‚</span> Ø¨ÙˆØ·ÙŠ
            </div>
            <a href="dashboard.html" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="margin-left:8px">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ùƒ
            </a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1 class="slide-up">Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙÙŠ Ø§Ù„Ø²Ù†ØªØ§Ù†</h1>
            <p class="slide-up"
                style="animation-delay: 0.1s; color: var(--text-sub); margin-bottom: 2rem; font-size: 1.1rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ù‚Ø±Ø¨ Ø´Ø§Ø­Ù†Ø© Ù…ÙŠØ§Ù‡ (Ø¨ÙˆØ·ÙŠ) Ù…Ù† Ø§Ù„Ø®Ø´Ø© Ø£Ùˆ ÙˆØ§Ø¯ÙŠ Ø²ÙˆÙŠØ§ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©
            </p>

            <!-- Filter Tags (Scrollable) -->
            <div class="filters-container slide-up" style="animation-delay: 0.2s;">
                <button onclick="sortDrivers('DEFAULT')" class="filter-tag active">ğŸ”¥ Ø§Ù„ÙƒÙ„</button>
                <button onclick="sortDrivers('PRICE_ASC')" class="filter-tag">ğŸ’° Ø§Ù„Ø£Ø±Ø®Øµ</button>
                <button onclick="sortDrivers('PRICE_DESC')" class="filter-tag">ğŸ’ Ø§Ù„Ø£ÙØ¶Ù„</button>
                <button onclick="filterByTime('MORNING')" class="filter-tag">â˜€ï¸ ØµØ¨Ø§Ø­ÙŠ</button>
                <button onclick="filterByTime('EVENING')" class="filter-tag">ğŸŒ™ Ù…Ø³Ø§Ø¦ÙŠ</button>
                <button onclick="filterByTime('ALWAYS')" class="filter-tag">ğŸš€ 24/7</button>
            </div>
        </div>
    </section>

    <main class="container">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <h2 style="font-size: 1.5rem;">Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù…ØªØ§Ø­ÙŠÙ† Ø§Ù„Ø¢Ù†</h2>
            <div class="pulse-dot"></div>
        </div>

        <div id="driver-grid" class="grid">
            <!-- Skeleton Loading State -->
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.1s"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.2s"></div>
        </div>
    </main>

    <footer>
        <p>Â© 2025 ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙˆØ·ÙŠ</p>
        <p class="alkow">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Alkow Software</p>
    </footer>

    <script src="app.js"></script>
    <script>
        // Page Logic
        let allDrivers = [];

        async function init() {
            allDrivers = await getDrivers();
            renderDrivers(allDrivers, 'driver-grid');
        }

        function sortDrivers(criteria) {
            // Visual feedback
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let sorted = [...allDrivers];

            if (criteria === 'PRICE_ASC') {
                sorted.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));
            } else if (criteria === 'PRICE_DESC') {
                sorted.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));
            } else {
                // Default logic (backend already sorts by priority, so just re-render or keep as is)
                // We trust backend sort for 'DEFAULT' but we need to account for OFF_DUTY at bottom
                // The backend sorts by priority, but renderDrivers sorts by Status.
                // Let renderDrivers handle the status sort.
            }

            renderDrivers(sorted, 'driver-grid');
        }

        init();
    </script>
</body>

</html>
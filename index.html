<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุจูุทู - ุชูุตูู ููุงู ุงูุฒูุชุงู</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#020617">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
    <header class="site-header">
        <div class="container nav-content">
            <div class="logo">
                <span style="color:var(--text-main)">ุชุทุจูู</span> ุจูุทู
            </div>
            <a href="dashboard.html" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="margin-left:8px">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                ุฅุฏุงุฑุฉ ุญุณุงุจู
            </a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1 class="slide-up">ุฎุฏูุฉ ุชูุตูู ุงูููุงู ูู ุงูุฒูุชุงู</h1>
            <p class="slide-up"
                style="animation-delay: 0.1s; color: var(--text-sub); margin-bottom: 2rem; font-size: 1.1rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                ุงุจุญุซ ุนู ุฃูุฑุจ ุดุงุญูุฉ ููุงู (ุจูุทู) ูู ุงูุฎุดุฉ ุฃู ูุงุฏู ุฒููุง ุจูู ุณูููุฉ
            </p>

            <!-- Filter Tags (Scrollable) -->
            <div class="filters-container slide-up" style="animation-delay: 0.2s;">
                <button onclick="sortDrivers('DEFAULT')" class="filter-tag active">๐ฅ ุงููู</button>
                <button onclick="sortDrivers('PRICE_ASC')" class="filter-tag">๐ฐ ุงูุฃุฑุฎุต</button>
                <button onclick="sortDrivers('PRICE_DESC')" class="filter-tag">๐ ุงูุฃูุถู</button>
                <button onclick="filterByTime('MORNING')" class="filter-tag">โ๏ธ ุตุจุงุญู</button>
                <button onclick="filterByTime('EVENING')" class="filter-tag">๐ ูุณุงุฆู</button>
                <button onclick="filterByTime('ALWAYS')" class="filter-tag">๐ 24/7</button>
            </div>
        </div>
    </section>

    <main class="container">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <h2 style="font-size: 1.5rem;">ุณุงุฆููู ูุชุงุญูู ุงูุขู</h2>
            <div class="pulse-dot"></div>
        </div>

        <div id="driver-grid" class="grid">
            <!-- Skeleton Loading State -->
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.1s"></div>
            <div class="skeleton sk-card" style="animation-delay: 0.2s"></div>
        </div>
    </main>

    <!-- Driver Details Modal -->
    <div id="driverModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content glass-effect">
            <button class="close-modal" onclick="closeModal(event)">ร</button>

            <div class="modal-header">
                <div class="modal-avatar">๐</div>
                <div>
                    <h2 id="modalName">ุงุณู ุงูุณุงุฆู</h2>
                    <div id="modalRating" class="star-rating">โญโญโญโญโญ 5.0</div>
                </div>
            </div>

            <div class="modal-badges" id="modalBadges">
                <!-- Badges injected here -->
            </div>

            <div class="modal-info-grid">
                <div class="info-item">
                    <span class="label">ุงูุณุนุฑ</span>
                    <span class="value" id="modalPrice">0 ุฏ.ู</span>
                </div>
                <div class="info-item">
                    <span class="label">ุงูุณุนุฉ</span>
                    <span class="value" id="modalCapacity">0 ูุชุฑ</span>
                </div>
                <div class="info-item">
                    <span class="label">ููุน ุงูุดุงุญูุฉ</span>
                    <span class="value" id="modalTruck">ุบูุฑ ูุญุฏุฏ</span>
                </div>
                <div class="info-item">
                    <span class="label">ุงูููุช</span>
                    <span class="value" id="modalHours">24/7</span>
                </div>
            </div>

            <div class="modal-bio" id="modalBio">
                <!-- Bio text -->
            </div>

            <div class="modal-actions">
                <a id="modalCall" href="#" class="btn btn-primary">๐ ุงุชุตุงู</a>
                <a id="modalWhatsApp" href="#" target="_blank" class="btn btn-secondary">๐ฌ ูุงุชุณุงุจ</a>
            </div>
        </div>
    </div>

    <footer>
        <p>ยฉ 2025 ุชุทุจูู ุจูุทู</p>
        <p class="alkow">ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ Alkow Software</p>
    </footer>

    <script src="app.js"></script>
    <script>
        // Page Logic
        let allDrivers = [];

        async function init() {
            allDrivers = await getDrivers();
            renderDrivers(allDrivers, 'driver-grid');
        }

        function sortDrivers(criteria) {
            // Visual feedback
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let sorted = [...allDrivers];

            if (criteria === 'PRICE_ASC') {
                sorted.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));
            } else if (criteria === 'PRICE_DESC') {
                sorted.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));
            } else {
                // Default logic (backend already sorts by priority, so just re-render or keep as is)
                // We trust backend sort for 'DEFAULT' but we need to account for OFF_DUTY at bottom
                // The backend sorts by priority, but renderDrivers sorts by Status.
                // Let renderDrivers handle the status sort.
            }

            renderDrivers(sorted, 'driver-grid');
        }

        init();
    </script>
</body>

</html>
